<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bill Ninja Mobile</title>
</head>

<body>
    <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"
        integrity="sha384-2huaZvOR9iDzHqslqwpR87isEmrfxqyWOF7hr7BY6KG0+hVKLoEXMPUJw3ynWuhO"
        crossorigin="anonymous"></script>
        <button id="startButton" >Start</button>
    <script>
        function client() {
            const socket = io();
            const orientationDisplay = document.getElementById('orientation');

            function handleOrientation(event) {
                const { alpha, beta, gamma } = event;
                const data = { alpha, beta, gamma };
                socket.emit('acceleration', data);
                orientationDisplay.textContent = `Alpha: ${alpha?.toFixed(2)}, Beta: ${beta?.toFixed(2)}, Gamma: ${gamma?.toFixed(2)}`;
            }

            function requestOrientationPermission() {
                if (typeof DeviceOrientationEvent !== 'undefined' && typeof DeviceOrientationEvent.requestPermission === 'function') {
                    DeviceOrientationEvent.requestPermission()
                        .then(permissionState => {
                            if (permissionState === 'granted') {
                                window.addEventListener('deviceorientation', handleOrientation);
                            } else {
                                orientationDisplay.textContent = 'Permission to access device orientation was denied';
                            }
                        })
                        .catch(console.error);
                } else if ('DeviceOrientationEvent' in window) {
                    window.addEventListener('deviceorientation', handleOrientation);
                } else {
                    orientationDisplay.textContent = 'Device Orientation API not supported.';
                }
            }

            document.getElementById('startButton').addEventListener('click', requestOrientationPermission);
        }

        if (typeof document !== "undefined") {
            client();
        }
    </script>
</body>

</html>